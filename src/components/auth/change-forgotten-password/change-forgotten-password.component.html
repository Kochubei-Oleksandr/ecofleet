<div class="change-forgotten-password">
  <div class="change-forgotten-password__content content">
    <div class="content__header header">
      <h3 class="header__title">{{'CHANGE_FORGOTTEN_PASSWORD' | translate}}</h3>
    </div>
    <div class="content__container container">
      <form class="container__form form" [formGroup]="changePasswordFormGroup">
        <mat-form-field class="form__item">
          <mat-label>{{'EMAIL' | translate}}</mat-label>
          <input required matInput formControlName="email" maxlength="100">
          <mat-hint align="end">
            {{changePasswordFormGroup.get('email').value?.length}} / 100
          </mat-hint>
          <mat-error *ngIf="changePasswordFormGroup.hasError('maxlength', 'email')">
            {{ 'MAX_LENGTH' | translate:{number: 100} }}
          </mat-error>
          <mat-error *ngIf="changePasswordFormGroup.hasError('email', 'email')">
            {{ 'EMAIL_ERROR' | translate }}
          </mat-error>
          <mat-error *ngIf="changePasswordFormGroup.hasError('required', 'email')">
            {{ 'REQUIRED_ERROR' | translate }}
          </mat-error>
          <mat-error *ngIf="serverValidationForm.isServerValidationError('email')">
            {{ serverValidationForm.getServerValidationError('email') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field class="form__item">
          <mat-label>{{'PASSWORD' | translate}}</mat-label>
          <input required matInput formControlName="password" maxlength="30" type="password">
          <mat-hint align="end">
            {{changePasswordFormGroup.get('password').value?.length}} / 30
          </mat-hint>
          <mat-error *ngIf="changePasswordFormGroup.hasError('maxlength', 'password')">
            {{ 'MAX_LENGTH' | translate:{number: 30} }}
          </mat-error>
          <mat-error *ngIf="changePasswordFormGroup.hasError('required', 'password')">
            {{ 'REQUIRED_ERROR' | translate }}
          </mat-error>
          <mat-error *ngIf="serverValidationForm.isServerValidationError('password')">
            {{ serverValidationForm.getServerValidationError('password') | translate }}
          </mat-error>
        </mat-form-field>

        <mat-form-field class="form__item">
          <mat-label>{{'CONFIRMATION_PASSWORD' | translate}}</mat-label>
          <input required matInput formControlName="password_confirmation" maxlength="30" type="password">
          <mat-hint align="end">
            {{changePasswordFormGroup.get('password_confirmation').value?.length}} / 30
          </mat-hint>
          <mat-error *ngIf="changePasswordFormGroup.hasError('maxlength', 'password_confirmation')">
            {{ 'MAX_LENGTH' | translate:{number: 30} }}
          </mat-error>
          <mat-error *ngIf="changePasswordFormGroup.hasError('notSame', 'password_confirmation')">
            {{'PASSWORDS_DO_NOT_MATCH' | translate}}
          </mat-error>
        </mat-form-field>
        <div class="form__btn--wrapper">
          <button
            *ngIf="isSaveNewPasswordRequestCompleted"
            (click)="saveNewPassword()"
            mat-stroked-button
            color="primary"
            [class]="{'form__btn': true,'form__btn--hidden' : !isSaveNewPasswordRequestCompleted}"
            [disabled]="!changePasswordFormGroup.valid"
          >
            {{'LOGIN' | translate}}
          </button>
          <app-progress-spinner *ngIf="!isSaveNewPasswordRequestCompleted">
          </app-progress-spinner>
        </div>
      </form>
    </div>
  </div>
</div>
